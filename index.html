<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Danisaurio</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#ffd166;--muted:#a7b0c2}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body {
  background: linear-gradient(180deg,#071126 0%, #081428 50%, #0b2030 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  min-height: 100vh; /* aseg칰rate que ocupe toda la pantalla */
}
   .card {
  width: 92vw;
  max-width: 880px;
  background: linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
  border-radius: 16px;
  padding: 36px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.6);
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.04);
  z-index: 1; /* encima del confetti */

  display: flex;
  flex-direction: column;
  align-items: center;  /* centra horizontal */
  text-align: center;   /* centra textos */
}
    .header{display:flex;align-items:center;gap:18px}
    .hat{width:84px;height:84px;border-radius:12px;background:linear-gradient(135deg,#0ea5a4,#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:32px;color:#05202a;box-shadow:0 6px 18px rgba(6,30,43,0.6)}
    h1{margin:0;font-size:28px;line-height:1.05}
    p{margin:8px 0 0;color:var(--muted)}
    .message{margin-top:24px;font-size:20px;min-height:72px}
    .typed{display:inline-block;white-space:pre-wrap}
    .accent{color:var(--accent);font-weight:700}
    .buttons{margin-top:22px;display:flex;gap:12px}
    .btn{background:#000000;border:1px solid; #ffffff;color:white;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
    .btn:active{transform:translateY(1px)}
    .img {
    display: flex;
    justify-content: center;
    margin-bottom: 20px; /* separaci칩n de la cabecera */
  }

  /* la imagen */
.img {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
}
.img img {
  width: 300px;
  height: 300px;
  object-fit: contain;
  border-radius: 12px;
}
    

    /* confetti canvas covers the card */
 #confetti {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw !important;
  height: 100vh !important;
  pointer-events: none;
  z-index: 0; /* al fondo */
}

    /* small wavy animation for the last phrase */
    .sad{display:inline-block;transform-origin:50% 50%;animation:wave 1.2s ease-in-out 0s 1}
    @keyframes wave{0%{transform:translateY(0)}25%{transform:translateY(-6px)}50%{transform:translateY(0)}75%{transform:translateY(-3px)}100%{transform:translateY(0)} }

    /* responsive */
    @media (max-width:520px){.header{gap:12px}.hat{width:64px;height:64px;font-size:24px}.card{padding:20px}.message{font-size:18px}}
  </style>
</head>
<body>
   <canvas id="confetti"></canvas>
  <div class="card" role="main" aria-live="polite">
    <div class ="img"><img alt="dani-sticker-epico" src="dani_sticker.webp"/></div>
    <div class="header">
      <div class="hat">游꿉</div>
      <div>
        <h1>Danisaurio!!!! Felicidades :D</h1>
        <p>Estoy seguro que todo tu esfuerzo tendr치 recompensas, segu칤 as칤.</p>
      </div>
    </div>

    <div class="message" aria-hidden="false">
      <span class="typed" id="typed"></span>
    </div>

    <div class="buttons">
      <button class="btn" id="replay">Dale play otra vez (el confetti tarda en cargar) </button>
    </div>
  </div>

  <script>
  // ---------------- Variables globales ----------------
  const parts = [
    'Muchas Felicidades por tu graduaci칩n Daniel, todos estamos orgullosos de ti',
    ' l치stima que no ser치s un ingeniero',
    'att. Pichi'
  ];

  const typedEl = document.getElementById('typed');
  const replay = document.getElementById('replay');
  const download = document.getElementById('download');

  const confCanvas = document.getElementById('confetti');
  const ctx = confCanvas.getContext('2d');

  let confettiRunning = false;
  let confettiPieces = [];

  // ---------------- Utilidades ----------------
  function sleep(ms){ return new Promise(r=>setTimeout(r,ms)) }

  function random(min,max){ return Math.random()*(max-min)+min }

  // ---------------- Animaci칩n de texto ----------------
  async function typeOnce(){
    typedEl.innerHTML = '';
    await typeText(parts[0], {speed:40, wrap:false});
    await sleep(400);

    const span = document.createElement('span');
    span.textContent = parts[1];
    span.className = 'sad accent';
    typedEl.appendChild(span);

    startConfetti();
  }

  async function typeText(text, {speed=50, wrap=true} = {}){
    for(let i=0;i<text.length;i++){
      typedEl.textContent += text[i];
      await sleep(speed + Math.random()*20);
    }
  }

  // ---------------- Confetti ----------------
  function fitCanvas(){
    confCanvas.width = window.innerWidth;
    confCanvas.height = window.innerHeight;
  }

  window.addEventListener('resize', fitCanvas);
  fitCanvas();

  function startConfetti(){
    confettiPieces = [];
    const count = 40;
    for(let i=0;i<count;i++){
      confettiPieces.push({
        x: random(0,confCanvas.width),
        y: random(-confCanvas.height,0),
        w: random(6,12),
        h: random(8,18),
        vx: random(-0.8,0.8),
        vy: random(1,3),
        rot: random(0,360),
        vr: random(-6,6),
        color: `hsl(${Math.floor(random(0,360))},90%,60%)`
      });
    }
    if(!confettiRunning){
      confettiRunning = true;
      requestAnimationFrame(loop);
    }
  }

  function stopConfetti(){ confettiRunning = false }

  function loop(){
    if(!confettiRunning) return;
    ctx.clearRect(0,0,confCanvas.width,confCanvas.height);
    for(let p of confettiPieces){
      p.x += p.vx*2;
      p.y += p.vy;
      p.vy += 0.03; // gravedad
      p.rot += p.vr;
      ctx.save();
      ctx.translate(p.x,p.y);
      ctx.rotate(p.rot*Math.PI/180);
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);
      ctx.restore();
    }
    confettiPieces = confettiPieces.filter(p=>p.y < confCanvas.height + 50);
    if(confettiPieces.length === 0){ confettiRunning = false; return }
    requestAnimationFrame(loop);
  }

  // ---------------- Eventos ----------------
  replay.addEventListener('click', ()=>{
    stopConfetti();
    typeOnce();
  });

  // (opcional) bot칩n de descarga
  if(download){
    download.addEventListener('click', async ()=>{
      const card = document.querySelector('.card');
      const rect = card.getBoundingClientRect();
      const svg = `<?xml version="1.0" encoding="utf-8"?>
        <svg xmlns='http://www.w3.org/2000/svg' width='${rect.width}' height='${rect.height}'>
          <foreignObject width='100%' height='100%'>
            ${new XMLSerializer().serializeToString(card.cloneNode(true))}
          </foreignObject>
        </svg>`;
      const svgBlob = new Blob([svg], {type:'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(svgBlob);
      const img = new Image();
      img.onload = ()=>{
        const c = document.createElement('canvas');
        c.width = rect.width * devicePixelRatio;
        c.height = rect.height * devicePixelRatio;
        const ctx2 = c.getContext('2d');
        ctx2.scale(devicePixelRatio, devicePixelRatio);
        ctx2.fillStyle = getComputedStyle(document.body).background;
        ctx2.fillRect(0,0,rect.width,rect.height);
        ctx2.drawImage(img,0,0);
        const a = document.createElement('a');
        a.download = 'felicidades.png';
        a.href = c.toDataURL('image/png');
        a.click();
        URL.revokeObjectURL(url);
      };
      img.src = url;
    });
  }

  // ---------------- Inicio ----------------
  window.addEventListener('load', ()=>{
    typeOnce();
    setTimeout(()=>{ stopConfetti() }, 4200);
  });
</script>

</body>
</html>
